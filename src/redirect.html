<!DOCTYPE html>
<html>
    <head>
        <!-- <meta http-equiv="refresh" content="5; URL=https://keystrokes-collablab.web.app/" /> -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
        <script src="jatos.js"></script>
        
    </head>
    <body>
        <iframe
        id="experiment"
        src="http://keystrokes-collablab.web.app"
        style="
          position: fixed;
          top: 0px;
          bottom: 0px;
          right: 0px;
          width: 100%;
          border: none;
          margin: 0;
          padding: 0;
          overflow: hidden;
          z-index: 999999;
          height: 100%;
        ">
      </iframe>
    
      <script>
        if (window.addEventListener) {
          window.addEventListener("message", onMessage, false);        
        } 
        else if (window.attachEvent) {
            window.attachEvent("onmessage", onMessage, false);
        }

        function onMessage(event) {
            // Check sender origin to be trusted
            if (event.origin !== "http://keystrokes-collablab.web.app") return;

            var data = event.data;

            if (typeof(window[data.func]) == "function") {
                window[data.func].call(null, data.message);
          }
        }

// Function to be called from iframe
      function parentFunc(message) {
          alert(message);
          jatos.endStudyAndRedirect("https://app.prolific.co/submissions/complete?cc=1234ABCD");
      }
      </script>
    </body>
</html>